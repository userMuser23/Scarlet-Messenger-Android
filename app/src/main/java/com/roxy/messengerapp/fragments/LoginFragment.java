package com.roxy.messengerapp.fragments;import android.content.Intent;import android.os.Bundle;import android.text.TextUtils;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.Button;import android.widget.EditText;import android.widget.TextView;import android.widget.Toast;import androidx.annotation.NonNull;import androidx.annotation.Nullable;import androidx.fragment.app.Fragment;import androidx.navigation.Navigation; // Импортируем для навигацииimport com.google.android.gms.tasks.OnCompleteListener;import com.google.android.gms.tasks.Task;import com.google.firebase.auth.AuthResult;import com.google.firebase.auth.FirebaseAuth;import com.roxy.messengerapp.R;import com.roxy.messengerapp.activities.MainActivity;public class LoginFragment extends Fragment {    EditText email, password;    Button btn_login;    TextView tv_register;    FirebaseAuth auth;    @Override    public View onCreateView(LayoutInflater inflater, ViewGroup container,                             Bundle savedInstanceState) {        return inflater.inflate(R.layout.fragment_login, container, false);    }    @Override    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {        super.onViewCreated(view, savedInstanceState);        auth = FirebaseAuth.getInstance();        email = view.findViewById(R.id.email);        password = view.findViewById(R.id.password);        btn_login = view.findViewById(R.id.btn_login);        tv_register = view.findViewById(R.id.tv_register);        // Логика кнопки "Войти"        btn_login.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                String txt_email = email.getText().toString();                String txt_password = password.getText().toString();                if (TextUtils.isEmpty(txt_email) || TextUtils.isEmpty(txt_password)){                    Toast.makeText(getContext(), "Заполните все поля", Toast.LENGTH_SHORT).show();                } else {                    // Авторизация в Firebase                    auth.signInWithEmailAndPassword(txt_email, txt_password)                            .addOnCompleteListener(new OnCompleteListener<AuthResult>() {                                @Override                                public void onComplete(@NonNull Task<AuthResult> task) {                                    if (task.isSuccessful()){                                        Intent intent = new Intent(getActivity(), MainActivity.class);                                        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);                                        startActivity(intent);                                        requireActivity().finish();                                    } else {                                        Toast.makeText(getContext(), "Ошибка входа!", Toast.LENGTH_SHORT).show();                                    }                                }                            });                }            }        });        // Логика текста "Зарегистрируйся" (Навигация)        tv_register.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                // Ищем контроллер навигации и говорим "Иди по стрелке action_login_to_register"                // Убедись, что ID action совпадает с тем, что в nav_auth.xml                Navigation.findNavController(v).navigate(R.id.action_login_to_register);            }        });    }}